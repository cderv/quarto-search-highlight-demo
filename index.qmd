---
title: "Search Highlight Demo"
---

## About This Demo

This site demonstrates the search highlight fix from [quarto-dev/quarto-cli#14047](https://github.com/quarto-dev/quarto-cli/issues/14047). When you navigate to a page with a `?q=term` parameter in the URL, matching terms are highlighted with a yellow background. This is the same mechanism used when you click a search result in the Quarto search box.

## How to Test

### Direct URL highlighting (`?q=`)

Try these links to see search highlighting in action:

- [Pandas page with "data" highlighted](pandas.html?q=data)
- [Visualization page with "chart" highlighted](visualization.html?q=chart)
- [Modeling page with "regression" highlighted](modeling.html?q=regression)

These use the `?q=term` URL parameter, which triggers JavaScript-based `<mark>` highlighting on the destination page. The highlights clear when you scroll enough to change the active section — this is by design.

### Through the search box

1. Click the search icon in the navbar (or press `S`)
2. Type a term like "regression"
3. Click on one of the search results

The destination page should scroll to the matching content with JS `<mark>` highlights (yellow background on matching terms, cleared on scroll).

### Two highlight mechanisms

Quarto search results include two highlight mechanisms in their URLs, each serving a different purpose:

- **JS `<mark>` highlights** via `?q=` parameter — highlights *all* matches on the page, useful on long pages ([PR #14049](https://github.com/quarto-dev/quarto-cli/pull/14049))
- **Browser text fragments** via `#:~:text=` in the URL — scrolls to and highlights *one* specific match, browser-native ([PR #14003](https://github.com/quarto-dev/quarto-cli/pull/14003))

::: {.callout-note}
## Text fragments vs JS marks on fuse.js sites

On sites using fuse.js search (like this one), the two mechanisms don't coexist. The `highlight()` function mutates the DOM by wrapping matches in `<mark>` elements, and this DOM mutation destroys the browser's text fragment highlight state. As a result, only the JS marks are visible.

On sites using Algolia search (like [quarto.org](https://quarto.org)), `?q=` is not added to search result URLs and `highlight()` never runs, so text fragments from PR #14003 are the primary highlight mechanism and work as expected. Making `?q=` work with Algolia search is discussed in [#13123](https://github.com/quarto-dev/quarto-cli/discussions/13123).
:::

## The Bug

In previous versions of Quarto, search highlights were cleared almost immediately after page load. Layout-settling events (`quarto-hrChanged` and `quarto-sectionChanged`) fired within the first ~24ms and triggered a `defined(defined())` call chain that wiped the `<mark>` elements before users could see them.

## The Fix

The fix delays the registration of highlight-clearing event listeners by 1000ms, giving the initial layout events time to settle before the listeners become active. This ensures that search highlights remain visible when navigating from search results.

See [PR #14049](https://github.com/quarto-dev/quarto-cli/pull/14049) for the implementation details.

## Content for Searching

This site includes several pages with data science content to provide realistic search targets. Each page covers a different topic — data manipulation with pandas, data visualization, and statistical modeling — with enough prose to exercise the search and highlight functionality across multiple pages.
